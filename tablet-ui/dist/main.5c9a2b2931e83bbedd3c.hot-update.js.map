{"version":3,"file":"main.5c9a2b2931e83bbedd3c.hot-update.js","mappings":"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","sources":["webpack://tablet-ui/./src/components/PaymentSelection.jsx","webpack://tablet-ui/webpack/runtime/getFullHash"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './PaymentSelection.css';\r\n\r\nexport default function PaymentSelection() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { nom, prenom, dateNaissance, age, tarif } = location.state || {};\r\n  \r\n  const [methodePaiement, setMethodePaiement] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // Vérifier si des données ont été passées\r\n  if (!nom || !prenom || !dateNaissance) {\r\n    // Rediriger vers le formulaire si pas de données\r\n    navigate('/non-member');\r\n    return null;\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!methodePaiement) {\r\n      setError(\"Veuillez sélectionner une méthode de paiement\");\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      // Envoi des données au backend sans attendre de validation\r\n      const response = await axios.post('http://localhost:4000/non-members', {\r\n        nom,\r\n        prenom,\r\n        dateNaissance,\r\n        tarif,\r\n        methodePaiement,\r\n        paid: false // Indique que le paiement n'est pas encore validé\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        // Redirection vers la page d'attente de confirmation\r\n        navigate('/non-member-confirmation', { \r\n          state: { \r\n            id: response.data.nonMember.id,\r\n            nom, \r\n            prenom, \r\n            dateNaissance, \r\n            tarif, \r\n            methodePaiement \r\n          } \r\n        });\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Erreur lors de l'enregistrement\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-selection\">\r\n      <h2>Sélection du tarif et du mode de paiement</h2>\r\n      \r\n      <div className=\"user-info\">\r\n        <p><strong>Nom :</strong> {nom}</p>\r\n        <p><strong>Prénom :</strong> {prenom}</p>\r\n        <p><strong>Date de naissance :</strong> {new Date(dateNaissance).toLocaleDateString('fr-FR')}</p>\r\n        <p><strong>Âge :</strong> {age} ans</p>\r\n      </div>\r\n      \r\n      <div className=\"tarif-box\">\r\n        <h3>Tarif applicable</h3>\r\n        <div className=\"tarif-amount\">\r\n          {tarif === 0 ? 'Gratuit' : `${tarif}€`}\r\n        </div>\r\n        <p className=\"tarif-explanation\">\r\n          {tarif === 0 && 'Entrée gratuite pour les enfants de moins de 6 ans.'}\r\n          {tarif === 8 && 'Tarif réduit pour les mineurs (6-18 ans).'}\r\n          {tarif === 10 && 'Tarif normal pour les adultes.'}\r\n        </p>\r\n      </div>\r\n      \r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"payment-methods\">\r\n          <h3>Méthode de paiement</h3>\r\n          <div className=\"radio-group\">\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"methodePaiement\"\r\n                value=\"CB\"\r\n                checked={methodePaiement === 'CB'}\r\n                onChange={() => setMethodePaiement('CB')}\r\n                required\r\n              />\r\n              Carte Bancaire\r\n            </label>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"methodePaiement\"\r\n                value=\"Cheque\"\r\n                checked={methodePaiement === 'Cheque'}\r\n                onChange={() => setMethodePaiement('Cheque')}\r\n              />\r\n              Chèque\r\n            </label>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"methodePaiement\"\r\n                value=\"Especes\"\r\n                checked={methodePaiement === 'Especes'}\r\n                onChange={() => setMethodePaiement('Especes')}\r\n              />\r\n              Espèces\r\n            </label>\r\n          </div>\r\n        </div>\r\n        \r\n        {error && <div className=\"error-message\">{error}</div>}\r\n        \r\n        <div className=\"buttons-container\">\r\n          <button \r\n            type=\"button\" \r\n            className=\"back-button\"\r\n            onClick={() => navigate('/non-member')}\r\n          >\r\n            Retour\r\n          </button>\r\n          <button \r\n            type=\"submit\" \r\n            className=\"continue-button\" \r\n            disabled={loading || !methodePaiement}\r\n          >\r\n            {loading ? 'Traitement...' : 'Continuer'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","__webpack_require__.h = () => (\"146e9079496a62705e44\")"],"names":["React","useState","useNavigate","useLocation","axios","jsx","_jsx","jsxs","_jsxs","PaymentSelection","_s","navigate","location","nom","prenom","dateNaissance","age","tarif","state","methodePaiement","setMethodePaiement","loading","setLoading","error","setError","handleSubmit","e","preventDefault","response","post","paid","data","success","id","nonMember","err","message","className","children","Date","toLocaleDateString","onSubmit","type","name","value","checked","onChange","required","onClick","disabled","_c","$RefreshReg$"],"sourceRoot":""}