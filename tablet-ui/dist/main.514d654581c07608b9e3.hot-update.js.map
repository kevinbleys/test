{"version":3,"file":"main.514d654581c07608b9e3.hot-update.js","mappings":"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","sources":["webpack://tablet-ui/./src/components/NonMemberConfirmation.jsx","webpack://tablet-ui/webpack/runtime/getFullHash"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './NonMemberConfirmation.css';\r\n\r\nexport default function NonMemberConfirmation() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { id, nom, prenom, dateNaissance, tarif, methodePaiement } = location.state || {};\r\n  \r\n  const [paymentStatus, setPaymentStatus] = useState('pending');\r\n  \r\n  useEffect(() => {\r\n    if (!id) return;\r\n    \r\n    console.log(\"Vérification du statut pour ID:\", id);\r\n    \r\n    // Fonction pour vérifier le statut du paiement\r\n    const checkPaymentStatus = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/presences/${id}`);\r\n        console.log(\"Réponse:\", response.data);\r\n        \r\n        if (response.data.success && response.data.presence) {\r\n          const status = response.data.presence.status;\r\n          console.log(\"Statut actuel:\", status);\r\n          \r\n          if (status === 'Payé' || status === 'Annulé') {\r\n            setPaymentStatus(status);\r\n            console.log(`Statut changé à ${status}, redirection prévue...`);\r\n            \r\n            // Rediriger vers la page d'accueil après 2 secondes\r\n            setTimeout(() => {\r\n              console.log(\"Redirection vers l'accueil\");\r\n              navigate('/');\r\n            }, 2000);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur de vérification:\", error);\r\n      }\r\n    };\r\n    \r\n    // Vérifier immédiatement puis toutes les 2 secondes\r\n    checkPaymentStatus();\r\n    const intervalId = setInterval(checkPaymentStatus, 2000);\r\n    \r\n    // Nettoyer l'intervalle lors du démontage\r\n    return () => clearInterval(intervalId);\r\n  }, [id, navigate]);\r\n  \r\n  // Rediriger si les données sont manquantes\r\n  if (!id || !nom || !prenom) {\r\n    navigate('/non-member');\r\n    return null;\r\n  }\r\n  \r\n  const formatDate = (dateString) => {\r\n    const options = { day: '2-digit', month: '2-digit', year: 'numeric' };\r\n    return new Date(dateString).toLocaleDateString('fr-FR', options);\r\n  };\r\n  \r\n  return (\r\n    <div className=\"confirmation-container\">\r\n      <div className=\"confirmation-card\">\r\n        {paymentStatus === 'Payé' ? (\r\n          <>\r\n            <h2 className=\"success-title\">Paiement validé !</h2>\r\n            <p>Votre paiement a été validé avec succès.</p>\r\n            <p>Vous allez être redirigé vers la page d'accueil...</p>\r\n          </>\r\n        ) : paymentStatus === 'Annulé' ? (\r\n          <>\r\n            <h2 className=\"canceled-title\">Paiement annulé</h2>\r\n            <p>Votre paiement a été annulé.</p>\r\n            <p>Vous allez être redirigé vers la page d'accueil...</p>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <h2>En attente de validation</h2>\r\n            <p>Votre demande a été enregistrée et est en attente de validation par un bénévole.</p>\r\n            <p className=\"highlight-text\">Veuillez vous présenter à l'accueil pour finaliser votre paiement.</p>\r\n          </>\r\n        )}\r\n        \r\n        <div className=\"info-box\">\r\n          <h3>Récapitulatif</h3>\r\n          <div className=\"info-row\"><span>Nom :</span><span>{nom}</span></div>\r\n          <div className=\"info-row\"><span>Prénom :</span><span>{prenom}</span></div>\r\n          <div className=\"info-row\"><span>Date de naissance :</span><span>{formatDate(dateNaissance)}</span></div>\r\n          <div className=\"info-row\"><span>Tarif :</span><span>{tarif === 0 ? 'Gratuit' : `${tarif}€`}</span></div>\r\n          <div className=\"info-row\"><span>Méthode de paiement :</span><span>{methodePaiement}</span></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","__webpack_require__.h = () => (\"c46ec711e8210e68ab60\")"],"names":["React","useState","useEffect","useNavigate","useLocation","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NonMemberConfirmation","_s","location","navigate","id","nom","prenom","dateNaissance","tarif","methodePaiement","state","paymentStatus","setPaymentStatus","console","log","checkPaymentStatus","response","get","data","success","presence","status","setTimeout","error","intervalId","setInterval","clearInterval","formatDate","dateString","options","day","month","year","Date","toLocaleDateString","className","children","_c","$RefreshReg$"],"sourceRoot":""}