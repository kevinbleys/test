{"version":3,"file":"main.cf177dd583b9f25ec4eb.hot-update.js","mappings":"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","sources":["webpack://tablet-ui/./src/components/MemberCheck.jsx","webpack://tablet-ui/webpack/runtime/getFullHash"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { playBuzzerSound, playBellSound, playSuccessSound, preloadSounds } from '../utils/soundUtils';\r\n\r\nexport default function MemberCheck() {\r\n  const [nom, setNom] = useState('');\r\n  const [prenom, setPrenom] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [benevoleCalled, setBenevoleCalled] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Pr√©-charger les sons au chargement du composant\r\n  useEffect(() => {\r\n    preloadSounds();\r\n  }, []);\r\n\r\n  const handleVerification = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setMessage('');\r\n    setBenevoleCalled(false);\r\n\r\n    try {\r\n      // √âtape 1: V√©rification de l'adh√©sion\r\n      const checkResponse = await axios.get('http://localhost:4000/members/check', {\r\n        params: { nom, prenom }\r\n      });\r\n\r\n      if (checkResponse.data.success) {\r\n        // Membre valide et pay√©\r\n        setMessage(checkResponse.data.message);\r\n        \r\n        // Jouer le son de succ√®s (optionnel)\r\n        playSuccessSound();\r\n        \r\n        // √âtape 2: Enregistrement de la pr√©sence SANS tarif pour les adh√©rents valides\r\n        const presenceResponse = await axios.post('http://localhost:4000/presences', {\r\n          type: 'adherent',\r\n          nom,\r\n          prenom\r\n          // BELANGRIJK: Geen tarif parameter voor adherents!\r\n        });\r\n\r\n        if (presenceResponse.data.success) {\r\n          // Redirection apr√®s succ√®s\r\n          setTimeout(() => {\r\n            navigate('/confirmation');\r\n          }, 2000);\r\n        } else {\r\n          setError(\"Erreur lors de l'enregistrement de la pr√©sence\");\r\n          playBuzzerSound();\r\n        }\r\n      } else {\r\n        // Membre non valide ou non pay√© - JOUER LE BUZZER\r\n        const errorMessage = checkResponse.data.error || \"Adh√©sion non valide\";\r\n        setError(errorMessage);\r\n        \r\n        // Jouer le son buzzer pour les erreurs\r\n        playBuzzerSound();\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      let errorMessage = \"Erreur de connexion\";\r\n      \r\n      if (error.response?.status === 404) {\r\n        errorMessage = \"Aucun membre trouv√© avec ce nom et pr√©nom\";\r\n      } else if (error.response?.data?.error) {\r\n        errorMessage = error.response.data.error;\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      setError(errorMessage);\r\n      \r\n      // Jouer le son buzzer pour toutes les erreurs\r\n      playBuzzerSound();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAppelerBenevole = () => {\r\n    // Jouer le son de cloche\r\n    playBellSound();\r\n    \r\n    // Marquer que le b√©n√©vole a √©t√© appel√©\r\n    setBenevoleCalled(true);\r\n    \r\n    // Afficher un message de confirmation\r\n    setMessage(\"Un b√©n√©vole va arriver pour vous aider !\");\r\n    \r\n    // Effacer le message apr√®s 5 secondes\r\n    setTimeout(() => {\r\n      if (benevoleCalled) {\r\n        setMessage('');\r\n        setBenevoleCalled(false);\r\n      }\r\n    }, 5000);\r\n  };\r\n\r\n  const handleRetourAccueil = () => {\r\n    // Effacer les champs et messages avant de revenir √† l'accueil\r\n    setNom('');\r\n    setPrenom('');\r\n    setError('');\r\n    setMessage('');\r\n    setLoading(false);\r\n    setBenevoleCalled(false);\r\n    \r\n    // Naviguer vers la page d'accueil\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"member-check\">\r\n      <div className=\"header-section\">\r\n        <h2>V√©rification d'adh√©sion</h2>\r\n        <div className=\"header-buttons\">\r\n          <button \r\n            type=\"button\" \r\n            className=\"btn-appeler-benevole\"\r\n            onClick={handleAppelerBenevole}\r\n            disabled={loading}\r\n          >\r\n            üîî Appeler un b√©n√©vole\r\n          </button>\r\n          <button \r\n            type=\"button\" \r\n            className=\"btn-retour-accueil\"\r\n            onClick={handleRetourAccueil}\r\n            disabled={loading}\r\n          >\r\n            ‚Üê Retour √† l'accueil\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <form onSubmit={handleVerification}>\r\n        <div className=\"form-group\">\r\n          <label>Nom</label>\r\n          <input\r\n            type=\"text\"\r\n            value={nom}\r\n            onChange={(e) => setNom(e.target.value)}\r\n            required\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label>Pr√©nom</label>\r\n          <input\r\n            type=\"text\"\r\n            value={prenom}\r\n            onChange={(e) => setPrenom(e.target.value)}\r\n            required\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        \r\n        <button type=\"submit\" disabled={loading} className=\"btn-verify\">\r\n          {loading ? 'V√©rification...' : 'V√©rifier'}\r\n        </button>\r\n      </form>\r\n      \r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <div className=\"error-icon\">‚ö†Ô∏è</div>\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {message && (\r\n        <div className={benevoleCalled ? \"benevole-message\" : \"success-message\"}>\r\n          <div className=\"success-icon\">\r\n            {benevoleCalled ? \"üîî\" : \"‚úÖ\"}\r\n          </div>\r\n          {message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","__webpack_require__.h = () => (\"ea34d649ba3393566ca2\")"],"names":["React","useState","useEffect","useNavigate","axios","playBuzzerSound","playBellSound","playSuccessSound","preloadSounds","jsx","_jsx","jsxs","_jsxs","MemberCheck","_s","nom","setNom","prenom","setPrenom","loading","setLoading","error","setError","message","setMessage","benevoleCalled","setBenevoleCalled","navigate","handleVerification","e","preventDefault","checkResponse","get","params","data","success","presenceResponse","post","type","setTimeout","errorMessage","console","response","status","handleAppelerBenevole","handleRetourAccueil","className","children","onClick","disabled","onSubmit","value","onChange","target","required","_c","$RefreshReg$"],"sourceRoot":""}